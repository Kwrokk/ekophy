<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
</head>
<body>
    <div>
        <form>
            Título
            <input minlength="2" type="text" id="titulo"/>
            Conteúdo
            <textarea id="conteudo" minlength="1">Escreva seu artigo aqui</textarea>
            <button type="button" id="botaoPublicar">Publicar</button>
        </form>
    </div>

    <script> 
        const titulo = document.getElementById("titulo");
        const conteudo = document.getElementById("conteudo");
        
        function salvarArtigo(titulo, conteudo) {
            const params = new URLSearchParams(window.location.search)
            const nomeDoAutor = params.get("nome");
            axios.post(`http://localhost:3000/artigos`, {
                "titulo": titulo,
                "conteudo": conteudo,
                "autor": nomeDoAutor
            })
            .then(res => {
                alert("Artigo Publicado.")
            })
            .catch(err => {
                alert("Tente novamente");
            })
        }
       
        
        const botaoPublicar = document.getElementById("botaoPublicar");
        botaoPublicar.addEventListener("click", () => salvarArtigo(titulo.value, conteudo.value));
    </script>
</body>
</html>